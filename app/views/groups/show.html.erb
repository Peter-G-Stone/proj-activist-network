<h1> <%= @group.name %> </h1>

<p> <%= @group.summary %> </p>

<br><br><br><br>

<% if @group_users.include?(current_user) %>
    <%= link_to "Leave Group", "/groups/#{@group.id}/leave_group" %>
<% else  %>
    <%= link_to "Join Group", "/groups/#{@group.id}/join_group" %>
<% end %> <br>
<% if @group_users.include?(current_user) && current_user.admin?(@group) %>
    <%= link_to "Edit Group", edit_group_path %>
    <%= button_to "Delete Group", group_path, method: :delete %>
<% end %>


<br><br><br>



<h1> Posts: </h1>
<p>(Click a post's link to see its comments.)</p><br>

<% if @group_users.include?(current_user) %>
    <h5><%= link_to "New Post", new_group_post_path(@group.id) %> </h5>
<% end %>

<ul>
<% @group_posts.reverse_each do |post| %>
    
    <h3><%= link_to post.content, group_post_path(@group.id, post.id) %></h3>
    <p>&nbsp&nbsp&nbsp&nbsp - Written by: <%= link_to post.user.name, profile_path(post.user) %></p> 
    <p>&nbsp&nbsp&nbsp&nbsp - Created: <%= post.created_at.strftime("%A, %d %b %Y %l:%M %p") %> UTC </p>
    <% if post.user == current_user %>
        <p>&nbsp&nbsp&nbsp&nbsp <%= link_to "Edit Post", edit_group_post_path(@group.id, post.id) %> </p>
        <p>&nbsp&nbsp&nbsp&nbsp <%= button_to "Delete Post", group_post_path(@group.id, post.id), method: :delete %> </p>
    <% end %>
    
<% end %>
        


</ul>


<h3> Members: </h3>

<ul>
    <% @group_users.each do |user| %>
        <li>  <%= link_to user.name, profile_path(user) %> </li>
    <% end %>
</ul>

<br><br>

<% if @group_users.include?(current_user) %>
    <%= link_to "Leave Group", "/groups/#{@group.id}/leave_group" %>
<% else  %>
    <%= link_to "Join Group", "/groups/#{@group.id}/join_group" %>
<% end %>